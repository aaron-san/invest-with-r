<script src="index_files/header-attrs-2.11/header-attrs.js"></script>
<script src="index_files/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="index_files/echarts4r-4.8.0/echarts-en.min.js"></script>
<script src="index_files/echarts4r-4.8.0/ecStat.min.js"></script>
<script src="index_files/echarts4r-4.8.0/dataTool.min.js"></script>
<script src="index_files/echarts4r-binding-0.4.3/echarts4r.js"></script>
<script src="index_files/shine-1.0.0/shine.js"></script>

<div id="TOC">
<ul>
<li><a href="#clean-the-data">Clean the Data</a></li>
<li><a href="#asset-performance">Asset Performance</a>
<ul>
<li><a href="#weights">Weights</a></li>
<li><a href="#set-benchmark">Set Benchmark</a></li>
<li><a href="#performance-stats">Performance stats</a></li>
</ul></li>
<li><a href="#portfolios-with-highest-returns">Portfolios with Highest Returns</a></li>
</ul>
</div>

<p>Building a balanced portfolio is not as easy as it might seem.</p>
<pre class="r"><code>library(tidyverse)
library(lubridate)
library(tidyquant, quietly = TRUE)
library(echarts4r)
library(plotly)
library(arrow)

filter &lt;- dplyr::filter
lag &lt;- dplyr::lag

file_prices &lt;- list.files(here::here(&quot;static&quot;, &quot;data&quot;),
           pattern = &quot;Prices from Tickers&quot;, full.names = TRUE) %&gt;% max()

prices &lt;- read_csv(file_prices, col_types = cols()) %&gt;% 
      select(ticker, date, adjusted)

tickers_to_use &lt;- c(&quot;GSG&quot;, &quot;USO&quot;, &quot;BND&quot;, &quot;SPY&quot;, &quot;VEA&quot;) 


# GSG : commodities
# USO : oil
# BND : U.S. bonds
# VWO : emerging markets
# SPY : large-cap U.S. companies
# VEA : developed markets</code></pre>
<div id="clean-the-data" class="section level1">
<h1>Clean the Data</h1>
<p>Letâ€™s create the returns table and define the start and end date of the time series.</p>
<pre class="r"><code>ticker_returns &lt;-
  prices %&gt;%
  filter(ticker %in% tickers_to_use) %&gt;%
  drop_na(adjusted) %&gt;%
  group_by(ticker) %&gt;%
  slice(xts::endpoints(date, on = &quot;months&quot;)) %&gt;%
  arrange(date) %&gt;%
  mutate(return = adjusted / lag(adjusted) - 1) %&gt;%
  mutate(index = adjusted / adjusted[1]) %&gt;%
  ungroup() %&gt;%
  select(ticker, date, return, index) %&gt;%
  drop_na()

start_date &lt;-
  ticker_returns %&gt;%
  group_by(ticker) %&gt;%
  filter(date == min(date)) %&gt;%
  pull(date) %&gt;%
  max()

end_date &lt;-
  ticker_returns %&gt;%
  group_by(ticker) %&gt;%
  filter(date == max(date)) %&gt;%
  pull(date) %&gt;%
  min() %&gt;%
  round_date(unit = &quot;months&quot;) %&gt;%
  {
    . - days(1)
  } %&gt;%
  as.character()

# No. Years:
time_period &lt;- (as.Date(end_date) - as.Date(start_date)) %&gt;% as.numeric()
 # 14 yrs 8 months


ticker_returns &lt;-
  ticker_returns %&gt;%
  filter(date &gt;= start_date, date &lt;= end_date)</code></pre>
<p>The data spans 14 years and 8 months.</p>
</div>
<div id="asset-performance" class="section level1">
<h1>Asset Performance</h1>
<p>How did each asset perform individually?</p>
<pre class="r"><code>ticker_returns %&gt;%
  group_by(ticker) %&gt;%
  e_chart(x = date) %&gt;%
  e_line(serie = index,
         symbol = &#39;emptyCircle&#39;,
         symbolSize = 1) %&gt;%
  e_tooltip(trigger = &quot;axis&quot;, backgroundColor = &#39;white&#39;) %&gt;%
  e_grid(right = &quot;15%&quot;, top = &quot;20%&quot;) %&gt;%
  e_title(text = &quot;Growth of select ETFs&quot;,
          # subtext = &quot;index value&quot;,
          left = &quot;center&quot;,
          top = &quot;5%&quot;) %&gt;%
  e_legend(orient = &quot;vertical&quot;,
           # type = &quot;scroll&quot;,
           top = &quot;15%&quot;,
           right = &quot;5&quot;,) %&gt;%
  e_datazoom(type = &quot;slider&quot;,
             start = 0,
             end = 100) %&gt;%
  e_theme(&quot;shine&quot;) %&gt;%
  e_toolbox_feature(&quot;dataZoom&quot;, selector = list(start = &#39;20&#39;,
                                                end = &#39;80&#39;)) %&gt;%
  e_toolbox_feature(feature = &quot;reset&quot;) %&gt;%
  e_toolbox_feature(&quot;dataView&quot;) %&gt;%
  e_toolbox_feature(&quot;saveAsImage&quot;)</code></pre>
<div id="htmlwidget-41119d4d3ba5511e6c21" style="width:100%;height:500px;" class="echarts4r html-widget"></div>
<script type="application/json" data-for="htmlwidget-41119d4d3ba5511e6c21">{"x":{"theme":"shine","tl":false,"draw":true,"renderer":"canvas","events":[],"buttons":[],"opts":{"yAxis":[{"show":true}],"xAxis":[{"data":["2007-08-31","2007-09-28","2007-10-31","2007-11-30","2007-12-31","2008-01-31","2008-02-29","2008-03-31","2008-04-30","2008-05-30","2008-06-30","2008-07-31","2008-08-29","2008-09-30","2008-10-31","2008-11-28","2008-12-31","2009-01-30","2009-02-27","2009-03-31","2009-04-30","2009-05-29","2009-06-30","2009-07-31","2009-08-31","2009-09-30","2009-10-30","2009-11-30","2009-12-31","2010-01-29","2010-02-26","2010-03-31","2010-04-30","2010-05-28","2010-06-30","2010-07-30","2010-08-31","2010-09-30","2010-10-29","2010-11-30","2010-12-31","2011-01-31","2011-02-28","2011-03-31","2011-04-29","2011-05-31","2011-06-30","2011-07-29","2011-08-31","2011-09-30","2011-10-31","2011-11-30","2011-12-30","2012-01-31","2012-02-29","2012-03-30","2012-04-30","2012-05-31","2012-06-29","2012-07-31","2012-08-31","2012-09-28","2012-10-31","2012-11-30","2012-12-31","2013-01-31","2013-02-28","2013-03-28","2013-04-30","2013-05-31","2013-06-28","2013-07-31","2013-08-30","2013-09-30","2013-10-31","2013-11-29","2013-12-31","2014-01-31","2014-02-28","2014-03-31","2014-04-30","2014-05-30","2014-06-30","2014-07-31","2014-08-29","2014-09-30","2014-10-31","2014-11-28","2014-12-31","2015-01-30","2015-02-27","2015-03-31","2015-04-30","2015-05-29","2015-06-30","2015-07-31","2015-08-31","2015-09-30","2015-10-30","2015-11-30","2015-12-31","2016-01-29","2016-02-29","2016-03-31","2016-04-29","2016-05-31","2016-06-30","2016-07-29","2016-08-31","2016-09-30","2016-10-31","2016-11-30","2016-12-30","2017-01-31","2017-02-28","2017-03-31","2017-04-28","2017-05-31","2017-06-30","2017-07-31","2017-08-31","2017-09-29","2017-10-31","2017-11-30","2017-12-29","2018-01-31","2018-02-28","2018-03-29","2018-04-30","2018-05-31","2018-06-29","2018-07-31","2018-08-31","2018-09-28","2018-10-31","2018-11-30","2018-12-31","2019-01-31","2019-02-28","2019-03-29","2019-04-30","2019-05-31","2019-06-28","2019-07-31","2019-08-30","2019-09-30","2019-10-31","2019-11-29","2019-12-31","2020-01-31","2020-02-28","2020-03-31","2020-04-30","2020-05-29","2020-06-30","2020-07-31","2020-08-31","2020-09-30","2020-10-30","2020-11-30","2020-12-31","2021-01-29","2021-02-26","2021-03-31","2021-04-30","2021-05-28","2021-06-30","2021-07-30","2021-08-31","2021-09-30","2021-10-29","2021-11-30","2021-12-31","2022-01-31","2022-02-28","2022-03-31","2022-04-29"],"type":"time","boundaryGap":true}],"legend":{"data":["BND","GSG","SPY","USO","VEA"],"show":true,"type":"plain","orient":"vertical","top":"15%","right":"5"},"series":[{"data":[{"value":["2007-08-31","1.012972"]},{"value":["2007-09-28","1.019085"]},{"value":["2007-10-31","1.028450"]},{"value":["2007-11-30","1.048594"]},{"value":["2007-12-31","1.057474"]},{"value":["2008-01-31","1.070730"]},{"value":["2008-02-29","1.071689"]},{"value":["2008-03-31","1.075972"]},{"value":["2008-04-30","1.072254"]},{"value":["2008-05-30","1.061596"]},{"value":["2008-06-30","1.062042"]},{"value":["2008-07-31","1.062265"]},{"value":["2008-08-29","1.071166"]},{"value":["2008-09-30","1.065641"]},{"value":["2008-10-31","1.034232"]},{"value":["2008-11-28","1.074846"]},{"value":["2008-12-31","1.130057"]},{"value":["2009-01-30","1.106588"]},{"value":["2009-02-27","1.100111"]},{"value":["2009-03-31","1.112147"]},{"value":["2009-04-30","1.117327"]},{"value":["2009-05-29","1.124848"]},{"value":["2009-06-30","1.131811"]},{"value":["2009-07-31","1.146634"]},{"value":["2009-08-31","1.158220"]},{"value":["2009-09-30","1.169860"]},{"value":["2009-10-30","1.173078"]},{"value":["2009-11-30","1.188375"]},{"value":["2009-12-31","1.171153"]},{"value":["2010-01-29","1.186204"]},{"value":["2010-02-26","1.190061"]},{"value":["2010-03-31","1.187423"]},{"value":["2010-04-30","1.200131"]},{"value":["2010-05-28","1.213661"]},{"value":["2010-06-30","1.231273"]},{"value":["2010-07-30","1.241878"]},{"value":["2010-08-31","1.261232"]},{"value":["2010-09-30","1.261171"]},{"value":["2010-10-29","1.265195"]},{"value":["2010-11-30","1.256573"]},{"value":["2010-12-31","1.243749"]},{"value":["2011-01-31","1.244834"]},{"value":["2011-02-28","1.248485"]},{"value":["2011-03-31","1.246647"]},{"value":["2011-04-29","1.264894"]},{"value":["2011-05-31","1.279826"]},{"value":["2011-06-30","1.275018"]},{"value":["2011-07-29","1.295765"]},{"value":["2011-08-31","1.317260"]},{"value":["2011-09-30","1.326017"]},{"value":["2011-10-31","1.327509"]},{"value":["2011-11-30","1.326714"]},{"value":["2011-12-30","1.342374"]},{"value":["2012-01-31","1.350890"]},{"value":["2012-02-29","1.351438"]},{"value":["2012-03-30","1.344576"]},{"value":["2012-04-30","1.359415"]},{"value":["2012-05-31","1.372079"]},{"value":["2012-06-29","1.372989"]},{"value":["2012-07-31","1.389900"]},{"value":["2012-08-31","1.392140"]},{"value":["2012-09-28","1.394662"]},{"value":["2012-10-31","1.393251"]},{"value":["2012-11-30","1.394071"]},{"value":["2012-12-31","1.381853"]},{"value":["2013-01-31","1.372315"]},{"value":["2013-02-28","1.379662"]},{"value":["2013-03-28","1.380753"]},{"value":["2013-04-30","1.394771"]},{"value":["2013-05-31","1.367911"]},{"value":["2013-06-28","1.345370"]},{"value":["2013-07-31","1.350488"]},{"value":["2013-08-30","1.338896"]},{"value":["2013-09-30","1.353810"]},{"value":["2013-10-31","1.365418"]},{"value":["2013-11-29","1.361400"]},{"value":["2013-12-31","1.352731"]},{"value":["2014-01-31","1.373685"]},{"value":["2014-02-28","1.380137"]},{"value":["2014-03-31","1.377795"]},{"value":["2014-04-30","1.388852"]},{"value":["2014-05-30","1.403478"]},{"value":["2014-06-30","1.404656"]},{"value":["2014-07-31","1.400753"]},{"value":["2014-08-29","1.416743"]},{"value":["2014-09-30","1.408645"]},{"value":["2014-10-31","1.418826"]},{"value":["2014-11-28","1.430617"]},{"value":["2014-12-31","1.431429"]},{"value":["2015-01-30","1.465838"]},{"value":["2015-02-27","1.446684"]},{"value":["2015-03-31","1.454570"]},{"value":["2015-04-30","1.449866"]},{"value":["2015-05-29","1.442664"]},{"value":["2015-06-30","1.426619"]},{"value":["2015-07-31","1.439162"]},{"value":["2015-08-31","1.435619"]},{"value":["2015-09-30","1.447241"]},{"value":["2015-10-30","1.447666"]},{"value":["2015-11-30","1.441972"]},{"value":["2015-12-31","1.439433"]},{"value":["2016-01-29","1.456721"]},{"value":["2016-02-29","1.469118"]},{"value":["2016-03-31","1.482093"]},{"value":["2016-04-29","1.488065"]},{"value":["2016-05-31","1.487957"]},{"value":["2016-06-30","1.518011"]},{"value":["2016-07-29","1.527105"]},{"value":["2016-08-31","1.522314"]},{"value":["2016-09-30","1.524053"]},{"value":["2016-10-31","1.509734"]},{"value":["2016-11-30","1.470876"]},{"value":["2016-12-30","1.475728"]},{"value":["2017-01-31","1.478468"]},{"value":["2017-02-28","1.487583"]},{"value":["2017-03-31","1.486996"]},{"value":["2017-04-28","1.498833"]},{"value":["2017-05-31","1.509478"]},{"value":["2017-06-30","1.510253"]},{"value":["2017-07-31","1.519501"]},{"value":["2017-08-31","1.535730"]},{"value":["2017-09-29","1.528530"]},{"value":["2017-10-31","1.528119"]},{"value":["2017-11-30","1.526490"]},{"value":["2017-12-29","1.534749"]},{"value":["2018-01-31","1.515745"]},{"value":["2018-02-28","1.500037"]},{"value":["2018-03-29","1.510336"]},{"value":["2018-04-30","1.497455"]},{"value":["2018-05-31","1.507670"]},{"value":["2018-06-29","1.510511"]},{"value":["2018-07-31","1.509957"]},{"value":["2018-08-31","1.520056"]},{"value":["2018-09-28","1.511758"]},{"value":["2018-10-31","1.498724"]},{"value":["2018-11-30","1.508258"]},{"value":["2018-12-31","1.536528"]},{"value":["2019-01-31","1.553598"]},{"value":["2019-02-28","1.552198"]},{"value":["2019-03-29","1.582293"]},{"value":["2019-04-30","1.581902"]},{"value":["2019-05-31","1.610792"]},{"value":["2019-06-28","1.630876"]},{"value":["2019-07-31","1.633316"]},{"value":["2019-08-30","1.678544"]},{"value":["2019-09-30","1.669016"]},{"value":["2019-10-31","1.674207"]},{"value":["2019-11-29","1.673512"]},{"value":["2019-12-31","1.672263"]},{"value":["2020-01-31","1.705365"]},{"value":["2020-02-28","1.733802"]},{"value":["2020-03-31","1.709033"]},{"value":["2020-04-30","1.756194"]},{"value":["2020-05-29","1.767938"]},{"value":["2020-06-30","1.779803"]},{"value":["2020-07-31","1.805680"]},{"value":["2020-08-31","1.788675"]},{"value":["2020-09-30","1.786913"]},{"value":["2020-10-30","1.776971"]},{"value":["2020-11-30","1.798535"]},{"value":["2020-12-31","1.801278"]},{"value":["2021-01-29","1.785756"]},{"value":["2021-02-26","1.758118"]},{"value":["2021-03-31","1.735765"]},{"value":["2021-04-30","1.750797"]},{"value":["2021-05-28","1.753491"]},{"value":["2021-06-30","1.769228"]},{"value":["2021-07-30","1.789900"]},{"value":["2021-08-31","1.786511"]},{"value":["2021-09-30","1.768403"]},{"value":["2021-10-29","1.769646"]},{"value":["2021-11-30","1.773258"]},{"value":["2021-12-31","1.767755"]},{"value":["2022-01-31","1.731253"]},{"value":["2022-02-28","1.711551"]},{"value":["2022-03-31","1.664447"]},{"value":["2022-04-29","1.598324"]}],"yAxisIndex":0,"xAxisIndex":0,"name":"BND","type":"line","coordinateSystem":"cartesian2d","symbol":"emptyCircle","symbolSize":1},{"data":[{"value":["2007-08-31","0.8492610"]},{"value":["2007-09-28","0.9294581"]},{"value":["2007-10-31","0.9852217"]},{"value":["2007-11-30","0.9806897"]},{"value":["2007-12-31","1.0392119"]},{"value":["2008-01-31","1.0344828"]},{"value":["2008-02-29","1.1509360"]},{"value":["2008-03-31","1.1400985"]},{"value":["2008-04-30","1.2334975"]},{"value":["2008-05-30","1.3379311"]},{"value":["2008-06-30","1.4760592"]},{"value":["2008-07-31","1.2794089"]},{"value":["2008-08-29","1.1836453"]},{"value":["2008-09-30","1.0600985"]},{"value":["2008-10-31","0.7456158"]},{"value":["2008-11-28","0.6346798"]},{"value":["2008-12-31","0.5637439"]},{"value":["2009-01-30","0.5054187"]},{"value":["2009-02-27","0.4744828"]},{"value":["2009-03-31","0.4961576"]},{"value":["2009-04-30","0.4884729"]},{"value":["2009-05-29","0.5934976"]},{"value":["2009-06-30","0.5921182"]},{"value":["2009-07-31","0.5964532"]},{"value":["2009-08-31","0.5990148"]},{"value":["2009-09-30","0.5848276"]},{"value":["2009-10-30","0.6130049"]},{"value":["2009-11-30","0.6208867"]},{"value":["2009-12-31","0.6269951"]},{"value":["2010-01-29","0.5761576"]},{"value":["2010-02-26","0.6102463"]},{"value":["2010-03-31","0.6139901"]},{"value":["2010-04-30","0.6333005"]},{"value":["2010-05-28","0.5471921"]},{"value":["2010-06-30","0.5475862"]},{"value":["2010-07-30","0.5791133"]},{"value":["2010-08-31","0.5473892"]},{"value":["2010-09-30","0.5913300"]},{"value":["2010-10-29","0.6084729"]},{"value":["2010-11-30","0.6159606"]},{"value":["2010-12-31","0.6719211"]},{"value":["2011-01-31","0.6928079"]},{"value":["2011-02-28","0.7111330"]},{"value":["2011-03-31","0.7359606"]},{"value":["2011-04-29","0.7672906"]},{"value":["2011-05-31","0.7146798"]},{"value":["2011-06-30","0.6721182"]},{"value":["2011-07-29","0.6933990"]},{"value":["2011-08-31","0.6815764"]},{"value":["2011-09-30","0.5948769"]},{"value":["2011-10-31","0.6559606"]},{"value":["2011-11-30","0.6658128"]},{"value":["2011-12-30","0.6498522"]},{"value":["2012-01-31","0.6654187"]},{"value":["2012-02-29","0.7067980"]},{"value":["2012-03-30","0.6853202"]},{"value":["2012-04-30","0.6829557"]},{"value":["2012-05-31","0.5956650"]},{"value":["2012-06-29","0.5998030"]},{"value":["2012-07-31","0.6350739"]},{"value":["2012-08-31","0.6805912"]},{"value":["2012-09-28","0.6660098"]},{"value":["2012-10-31","0.6392118"]},{"value":["2012-11-30","0.6494581"]},{"value":["2012-12-31","0.6461084"]},{"value":["2013-01-31","0.6756650"]},{"value":["2013-02-28","0.6411823"]},{"value":["2013-03-28","0.6482759"]},{"value":["2013-04-30","0.6165517"]},{"value":["2013-05-31","0.6070936"]},{"value":["2013-06-28","0.6068965"]},{"value":["2013-07-31","0.6411823"]},{"value":["2013-08-30","0.6610837"]},{"value":["2013-09-30","0.6380296"]},{"value":["2013-10-31","0.6287685"]},{"value":["2013-11-29","0.6258128"]},{"value":["2013-12-31","0.6342857"]},{"value":["2014-01-31","0.6202956"]},{"value":["2014-02-28","0.6500493"]},{"value":["2014-03-31","0.6496552"]},{"value":["2014-04-30","0.6561576"]},{"value":["2014-05-30","0.6528079"]},{"value":["2014-06-30","0.6683743"]},{"value":["2014-07-31","0.6305419"]},{"value":["2014-08-29","0.6206897"]},{"value":["2014-09-30","0.5830542"]},{"value":["2014-10-31","0.5483744"]},{"value":["2014-11-28","0.4930049"]},{"value":["2014-12-31","0.4252217"]},{"value":["2015-01-30","0.3881774"]},{"value":["2015-02-27","0.4112315"]},{"value":["2015-03-31","0.3842365"]},{"value":["2015-04-30","0.4262069"]},{"value":["2015-05-29","0.4169458"]},{"value":["2015-06-30","0.4159606"]},{"value":["2015-07-31","0.3570444"]},{"value":["2015-08-31","0.3580296"]},{"value":["2015-09-30","0.3365517"]},{"value":["2015-10-30","0.3363547"]},{"value":["2015-11-30","0.3056158"]},{"value":["2015-12-31","0.2803941"]},{"value":["2016-01-29","0.2656158"]},{"value":["2016-02-29","0.2600985"]},{"value":["2016-03-31","0.2717241"]},{"value":["2016-04-29","0.2999015"]},{"value":["2016-05-31","0.3038424"]},{"value":["2016-06-30","0.3058128"]},{"value":["2016-07-29","0.2750739"]},{"value":["2016-08-31","0.2805911"]},{"value":["2016-09-30","0.2920197"]},{"value":["2016-10-31","0.2868966"]},{"value":["2016-11-30","0.2939901"]},{"value":["2016-12-30","0.3087685"]},{"value":["2017-01-31","0.3040394"]},{"value":["2017-02-28","0.3044335"]},{"value":["2017-03-31","0.2920197"]},{"value":["2017-04-28","0.2843350"]},{"value":["2017-05-31","0.2809852"]},{"value":["2017-06-30","0.2762562"]},{"value":["2017-07-31","0.2878818"]},{"value":["2017-08-31","0.2849261"]},{"value":["2017-09-29","0.2935961"]},{"value":["2017-10-31","0.3050246"]},{"value":["2017-11-30","0.3089655"]},{"value":["2017-12-29","0.3207882"]},{"value":["2018-01-31","0.3328079"]},{"value":["2018-02-28","0.3205911"]},{"value":["2018-03-29","0.3280788"]},{"value":["2018-04-30","0.3432512"]},{"value":["2018-05-31","0.3485714"]},{"value":["2018-06-29","0.3529064"]},{"value":["2018-07-31","0.3400985"]},{"value":["2018-08-31","0.3436453"]},{"value":["2018-09-28","0.3568473"]},{"value":["2018-10-31","0.3347783"]},{"value":["2018-11-30","0.2977340"]},{"value":["2018-12-31","0.2762562"]},{"value":["2019-01-31","0.2993103"]},{"value":["2019-02-28","0.3097537"]},{"value":["2019-03-29","0.3142857"]},{"value":["2019-04-30","0.3229556"]},{"value":["2019-05-31","0.2957635"]},{"value":["2019-06-28","0.3083744"]},{"value":["2019-07-31","0.3069951"]},{"value":["2019-08-30","0.2920197"]},{"value":["2019-09-30","0.2965517"]},{"value":["2019-10-31","0.2989163"]},{"value":["2019-11-29","0.3000985"]},{"value":["2019-12-31","0.3194088"]},{"value":["2020-01-31","0.2855172"]},{"value":["2020-02-28","0.2632512"]},{"value":["2020-03-31","0.1832512"]},{"value":["2020-04-30","0.1670936"]},{"value":["2020-05-29","0.1934975"]},{"value":["2020-06-30","0.2043350"]},{"value":["2020-07-31","0.2118227"]},{"value":["2020-08-31","0.2216749"]},{"value":["2020-09-30","0.2118227"]},{"value":["2020-10-30","0.2045320"]},{"value":["2020-11-30","0.2295567"]},{"value":["2020-12-31","0.2429557"]},{"value":["2021-01-29","0.2543842"]},{"value":["2021-02-26","0.2805911"]},{"value":["2021-03-31","0.2752709"]},{"value":["2021-04-30","0.2975369"]},{"value":["2021-05-28","0.3046305"]},{"value":["2021-06-30","0.3170443"]},{"value":["2021-07-30","0.3211822"]},{"value":["2021-08-31","0.3134975"]},{"value":["2021-09-30","0.3322168"]},{"value":["2021-10-29","0.3517241"]},{"value":["2021-11-30","0.3144828"]},{"value":["2021-12-31","0.3371429"]},{"value":["2022-01-31","0.3767488"]},{"value":["2022-02-28","0.4100492"]},{"value":["2022-03-31","0.4463054"]},{"value":["2022-04-29","0.4666010"]}],"yAxisIndex":0,"xAxisIndex":0,"name":"GSG","type":"line","coordinateSystem":"cartesian2d","symbol":"emptyCircle","symbolSize":1},{"data":[{"value":["2007-08-31","1.1308454"]},{"value":["2007-09-28","1.1746246"]},{"value":["2007-10-31","1.1905609"]},{"value":["2007-11-30","1.1444473"]},{"value":["2007-12-31","1.1315603"]},{"value":["2008-01-31","1.0631447"]},{"value":["2008-02-29","1.0356701"]},{"value":["2008-03-31","1.0264092"]},{"value":["2008-04-30","1.0753299"]},{"value":["2008-05-30","1.0915851"]},{"value":["2008-06-30","1.0003551"]},{"value":["2008-07-31","0.9913660"]},{"value":["2008-08-29","1.0066865"]},{"value":["2008-09-30","0.9118829"]},{"value":["2008-10-31","0.7612522"]},{"value":["2008-11-28","0.7082642"]},{"value":["2008-12-31","0.7152026"]},{"value":["2009-01-30","0.6564739"]},{"value":["2009-02-27","0.5859366"]},{"value":["2009-03-31","0.6347516"]},{"value":["2009-04-30","0.6978116"]},{"value":["2009-05-29","0.7386009"]},{"value":["2009-06-30","0.7381175"]},{"value":["2009-07-31","0.7931852"]},{"value":["2009-08-31","0.8224848"]},{"value":["2009-09-30","0.8516482"]},{"value":["2009-10-30","0.8352749"]},{"value":["2009-11-30","0.8867334"]},{"value":["2009-12-31","0.9036709"]},{"value":["2010-01-29","0.8708293"]},{"value":["2010-02-26","0.8979943"]},{"value":["2010-03-31","0.9526640"]},{"value":["2010-04-30","0.9674019"]},{"value":["2010-05-28","0.8905374"]},{"value":["2010-06-30","0.8444602"]},{"value":["2010-07-30","0.9021374"]},{"value":["2010-08-31","0.8615587"]},{"value":["2010-09-30","0.9387153"]},{"value":["2010-10-29","0.9745761"]},{"value":["2010-11-30","0.9745761"]},{"value":["2010-12-31","1.0397287"]},{"value":["2011-01-31","1.0639544"]},{"value":["2011-02-28","1.1009135"]},{"value":["2011-03-31","1.1010457"]},{"value":["2011-04-29","1.1329339"]},{"value":["2011-05-31","1.1202281"]},{"value":["2011-06-30","1.1013307"]},{"value":["2011-07-29","1.0792989"]},{"value":["2011-08-31","1.0199639"]},{"value":["2011-09-30","0.9491570"]},{"value":["2011-10-31","1.0527548"]},{"value":["2011-11-30","1.0484767"]},{"value":["2011-12-30","1.0594317"]},{"value":["2012-01-31","1.1085624"]},{"value":["2012-02-29","1.1566801"]},{"value":["2012-03-30","1.1938831"]},{"value":["2012-04-30","1.1859130"]},{"value":["2012-05-31","1.1146922"]},{"value":["2012-06-29","1.1599278"]},{"value":["2012-07-31","1.1736488"]},{"value":["2012-08-31","1.2030525"]},{"value":["2012-09-28","1.2335506"]},{"value":["2012-10-31","1.2111021"]},{"value":["2012-11-30","1.2179568"]},{"value":["2012-12-31","1.2288386"]},{"value":["2013-01-31","1.2917433"]},{"value":["2013-02-28","1.3082239"]},{"value":["2013-03-28","1.3578986"]},{"value":["2013-04-30","1.3839874"]},{"value":["2013-05-31","1.4166626"]},{"value":["2013-06-28","1.3977579"]},{"value":["2013-07-31","1.4699898"]},{"value":["2013-08-30","1.4259017"]},{"value":["2013-09-30","1.4710261"]},{"value":["2013-10-31","1.5391444"]},{"value":["2013-11-29","1.5847612"]},{"value":["2013-12-31","1.6258484"]},{"value":["2014-01-31","1.5685404"]},{"value":["2014-02-28","1.6399338"]},{"value":["2014-03-31","1.6535376"]},{"value":["2014-04-30","1.6650320"]},{"value":["2014-05-30","1.7036719"]},{"value":["2014-06-30","1.7388440"]},{"value":["2014-07-31","1.7154777"]},{"value":["2014-08-29","1.7831763"]},{"value":["2014-09-30","1.7585752"]},{"value":["2014-10-31","1.7999917"]},{"value":["2014-11-28","1.8494408"]},{"value":["2014-12-31","1.8447495"]},{"value":["2015-01-30","1.7900907"]},{"value":["2015-02-27","1.8907019"]},{"value":["2015-03-31","1.8610069"]},{"value":["2015-04-30","1.8793087"]},{"value":["2015-05-29","1.9034691"]},{"value":["2015-06-30","1.8648059"]},{"value":["2015-07-31","1.9069302"]},{"value":["2015-08-31","1.7907031"]},{"value":["2015-09-30","1.7450114"]},{"value":["2015-10-30","1.8934413"]},{"value":["2015-11-30","1.9003620"]},{"value":["2015-12-31","1.8675189"]},{"value":["2016-01-29","1.7745416"]},{"value":["2016-02-29","1.7730761"]},{"value":["2016-03-31","1.8923433"]},{"value":["2016-04-29","1.8998021"]},{"value":["2016-05-31","1.9321203"]},{"value":["2016-06-30","1.9388361"]},{"value":["2016-07-29","2.0095480"]},{"value":["2016-08-31","2.0119545"]},{"value":["2016-09-30","2.0120710"]},{"value":["2016-10-31","1.9771879"]},{"value":["2016-11-30","2.0500243"]},{"value":["2016-12-30","2.0915818"]},{"value":["2017-01-31","2.1290104"]},{"value":["2017-02-28","2.2126625"]},{"value":["2017-03-31","2.2154279"]},{"value":["2017-04-28","2.2374188"]},{"value":["2017-05-31","2.2689953"]},{"value":["2017-06-30","2.2834595"]},{"value":["2017-07-31","2.3303948"]},{"value":["2017-08-31","2.3371938"]},{"value":["2017-09-29","2.3842873"]},{"value":["2017-10-31","2.4404707"]},{"value":["2017-11-30","2.5150658"]},{"value":["2017-12-29","2.5455676"]},{"value":["2018-01-31","2.6890338"]},{"value":["2018-02-28","2.5912599"]},{"value":["2018-03-29","2.5202319"]},{"value":["2018-04-30","2.5332572"]},{"value":["2018-05-31","2.5948381"]},{"value":["2018-06-29","2.6097610"]},{"value":["2018-07-31","2.7064438"]},{"value":["2018-08-31","2.7928334"]},{"value":["2018-09-28","2.8094374"]},{"value":["2018-10-31","2.6152931"]},{"value":["2018-11-30","2.6638050"]},{"value":["2018-12-31","2.4292612"]},{"value":["2019-01-31","2.6237619"]},{"value":["2019-02-28","2.7088133"]},{"value":["2019-03-29","2.7578439"]},{"value":["2019-04-30","2.8705086"]},{"value":["2019-05-31","2.6874527"]},{"value":["2019-06-28","2.8744633"]},{"value":["2019-07-31","2.9179237"]},{"value":["2019-08-30","2.8690677"]},{"value":["2019-09-30","2.9248938"]},{"value":["2019-10-31","2.9895467"]},{"value":["2019-11-29","3.0977635"]},{"value":["2019-12-31","3.1877704"]},{"value":["2020-01-31","3.1864832"]},{"value":["2020-02-28","2.9342229"]},{"value":["2020-03-31","2.5678228"]},{"value":["2020-04-30","2.8938938"]},{"value":["2020-05-29","3.0317746"]},{"value":["2020-06-30","3.0855411"]},{"value":["2020-07-31","3.2672556"]},{"value":["2020-08-31","3.4952991"]},{"value":["2020-09-30","3.3644229"]},{"value":["2020-10-30","3.2805352"]},{"value":["2020-11-30","3.6373819"]},{"value":["2020-12-31","3.7721411"]},{"value":["2021-01-29","3.7337008"]},{"value":["2021-02-26","3.8375181"]},{"value":["2021-03-31","4.0117386"]},{"value":["2021-04-30","4.2240015"]},{"value":["2021-05-28","4.2517367"]},{"value":["2021-06-30","4.3470926"]},{"value":["2021-07-30","4.4532156"]},{"value":["2021-08-31","4.5857430"]},{"value":["2021-09-30","4.3720223"]},{"value":["2021-10-29","4.6787789"]},{"value":["2021-11-30","4.6411858"]},{"value":["2021-12-31","4.8558301"]},{"value":["2022-01-31","4.5997275"]},{"value":["2022-02-28","4.4639574"]},{"value":["2022-03-31","4.6317591"]},{"value":["2022-04-29","4.2252340"]}],"yAxisIndex":0,"xAxisIndex":0,"name":"SPY","type":"line","coordinateSystem":"cartesian2d","symbol":"emptyCircle","symbolSize":1},{"data":[{"value":["2007-08-31","0.80120650"]},{"value":["2007-09-28","0.89844868"]},{"value":["2007-10-31","1.05242737"]},{"value":["2007-11-30","1.00416548"]},{"value":["2007-12-31","1.08819304"]},{"value":["2008-01-31","1.03921281"]},{"value":["2008-02-29","1.15512776"]},{"value":["2008-03-31","1.16862967"]},{"value":["2008-04-30","1.32864114"]},{"value":["2008-05-30","1.48032165"]},{"value":["2008-06-30","1.63257683"]},{"value":["2008-07-31","1.43622514"]},{"value":["2008-08-29","1.33395575"]},{"value":["2008-09-30","1.17796609"]},{"value":["2008-10-31","0.79847742"]},{"value":["2008-11-28","0.60456763"]},{"value":["2008-12-31","0.47543805"]},{"value":["2009-01-30","0.41970696"]},{"value":["2009-02-27","0.38853775"]},{"value":["2009-03-31","0.41726513"]},{"value":["2009-04-30","0.41123238"]},{"value":["2009-05-29","0.52283827"]},{"value":["2009-06-30","0.54481469"]},{"value":["2009-07-31","0.52872738"]},{"value":["2009-08-31","0.51781094"]},{"value":["2009-09-30","0.51982185"]},{"value":["2009-10-30","0.56478021"]},{"value":["2009-11-30","0.56233841"]},{"value":["2009-12-31","0.56420565"]},{"value":["2010-01-29","0.51192183"]},{"value":["2010-02-26","0.55759837"]},{"value":["2010-03-31","0.57871300"]},{"value":["2010-04-30","0.59365125"]},{"value":["2010-05-28","0.48893995"]},{"value":["2010-06-30","0.48779083"]},{"value":["2010-07-30","0.50761274"]},{"value":["2010-08-31","0.45848892"]},{"value":["2010-09-30","0.50043089"]},{"value":["2010-10-29","0.50517088"]},{"value":["2010-11-30","0.51766733"]},{"value":["2010-12-31","0.56018383"]},{"value":["2011-01-31","0.55458200"]},{"value":["2011-02-28","0.56291291"]},{"value":["2011-03-31","0.61189309"]},{"value":["2011-04-29","0.64852054"]},{"value":["2011-05-31","0.58172937"]},{"value":["2011-06-30","0.53490377"]},{"value":["2011-07-29","0.53748918"]},{"value":["2011-08-31","0.49569085"]},{"value":["2011-09-30","0.43794884"]},{"value":["2011-10-31","0.51335823"]},{"value":["2011-11-30","0.55702380"]},{"value":["2011-12-30","0.54740016"]},{"value":["2012-01-31","0.54323468"]},{"value":["2012-02-29","0.58776209"]},{"value":["2012-03-30","0.56348747"]},{"value":["2012-04-30","0.56995114"]},{"value":["2012-05-31","0.46839988"]},{"value":["2012-06-29","0.45719619"]},{"value":["2012-07-31","0.46940533"]},{"value":["2012-08-31","0.51551275"]},{"value":["2012-09-28","0.49008902"]},{"value":["2012-10-31","0.45647801"]},{"value":["2012-11-30","0.46768170"]},{"value":["2012-12-31","0.47931625"]},{"value":["2013-01-31","0.50675090"]},{"value":["2013-02-28","0.47486355"]},{"value":["2013-03-28","0.49913816"]},{"value":["2013-04-30","0.47629989"]},{"value":["2013-05-31","0.46839988"]},{"value":["2013-06-28","0.49095086"]},{"value":["2013-07-31","0.53662739"]},{"value":["2013-08-30","0.55271471"]},{"value":["2013-09-30","0.52930188"]},{"value":["2013-10-31","0.49827632"]},{"value":["2013-11-29","0.48060899"]},{"value":["2013-12-31","0.50732546"]},{"value":["2014-01-31","0.49985633"]},{"value":["2014-02-28","0.52772192"]},{"value":["2014-03-31","0.52556735"]},{"value":["2014-04-30","0.52168915"]},{"value":["2014-05-30","0.54122377"]},{"value":["2014-06-30","0.55846021"]},{"value":["2014-07-31","0.52168915"]},{"value":["2014-08-29","0.51364546"]},{"value":["2014-09-30","0.49425450"]},{"value":["2014-10-31","0.43995975"]},{"value":["2014-11-28","0.36742314"]},{"value":["2014-12-31","0.29244470"]},{"value":["2015-01-30","0.25596092"]},{"value":["2015-02-27","0.25998276"]},{"value":["2015-03-31","0.24188451"]},{"value":["2015-04-30","0.29459925"]},{"value":["2015-05-29","0.29172650"]},{"value":["2015-06-30","0.28555011"]},{"value":["2015-07-31","0.22392990"]},{"value":["2015-08-31","0.22823901"]},{"value":["2015-09-30","0.21085894"]},{"value":["2015-10-30","0.21272623"]},{"value":["2015-11-30","0.18572249"]},{"value":["2015-12-31","0.15800057"]},{"value":["2016-01-29","0.13860958"]},{"value":["2016-02-29","0.12927319"]},{"value":["2016-03-31","0.13932777"]},{"value":["2016-04-29","0.16230968"]},{"value":["2016-05-31","0.17049698"]},{"value":["2016-06-30","0.16618787"]},{"value":["2016-07-29","0.14018960"]},{"value":["2016-08-31","0.14880780"]},{"value":["2016-09-30","0.15699511"]},{"value":["2016-10-31","0.15124963"]},{"value":["2016-11-30","0.15699511"]},{"value":["2016-12-30","0.16834243"]},{"value":["2017-01-31","0.16259694"]},{"value":["2017-02-28","0.16446422"]},{"value":["2017-03-31","0.15282965"]},{"value":["2017-04-28","0.14708416"]},{"value":["2017-05-31","0.14306233"]},{"value":["2017-06-30","0.13645504"]},{"value":["2017-07-31","0.14765871"]},{"value":["2017-08-31","0.13832232"]},{"value":["2017-09-29","0.14981327"]},{"value":["2017-10-31","0.15699511"]},{"value":["2017-11-30","0.16475151"]},{"value":["2017-12-29","0.17250790"]},{"value":["2018-01-31","0.18644066"]},{"value":["2018-02-28","0.17767882"]},{"value":["2018-03-29","0.18802068"]},{"value":["2018-04-30","0.19821890"]},{"value":["2018-05-31","0.19462798"]},{"value":["2018-06-29","0.21631715"]},{"value":["2018-07-31","0.20511346"]},{"value":["2018-08-31","0.21128985"]},{"value":["2018-09-28","0.22292445"]},{"value":["2018-10-31","0.19807526"]},{"value":["2018-11-30","0.15412237"]},{"value":["2018-12-31","0.13875322"]},{"value":["2019-01-31","0.16302786"]},{"value":["2019-02-28","0.17164607"]},{"value":["2019-03-29","0.17954610"]},{"value":["2019-04-30","0.19089341"]},{"value":["2019-05-31","0.15943694"]},{"value":["2019-06-28","0.17293880"]},{"value":["2019-07-31","0.17293880"]},{"value":["2019-08-30","0.16460786"]},{"value":["2019-09-30","0.16288422"]},{"value":["2019-10-31","0.16230968"]},{"value":["2019-11-29","0.16690605"]},{"value":["2019-12-31","0.18399885"]},{"value":["2020-01-31","0.15570238"]},{"value":["2020-02-28","0.13573685"]},{"value":["2020-03-31","0.06047113"]},{"value":["2020-04-30","0.03432922"]},{"value":["2020-05-29","0.04646653"]},{"value":["2020-06-30","0.05038063"]},{"value":["2020-07-31","0.05219405"]},{"value":["2020-08-31","0.05490520"]},{"value":["2020-09-30","0.05079359"]},{"value":["2020-10-30","0.04533539"]},{"value":["2020-11-30","0.05560543"]},{"value":["2020-12-31","0.05926816"]},{"value":["2021-01-29","0.06316432"]},{"value":["2021-02-26","0.07417050"]},{"value":["2021-03-31","0.07277003"]},{"value":["2021-04-30","0.07768960"]},{"value":["2021-05-28","0.08154984"]},{"value":["2021-06-30","0.08955760"]},{"value":["2021-07-30","0.09095805"]},{"value":["2021-08-31","0.08625395"]},{"value":["2021-09-30","0.09436943"]},{"value":["2021-10-29","0.10261060"]},{"value":["2021-11-30","0.08602054"]},{"value":["2021-12-31","0.09760126"]},{"value":["2022-01-31","0.11218040"]},{"value":["2022-02-28","0.12115771"]},{"value":["2022-03-31","0.13307957"]},{"value":["2022-04-29","0.13853778"]}],"yAxisIndex":0,"xAxisIndex":0,"name":"USO","type":"line","coordinateSystem":"cartesian2d","symbol":"emptyCircle","symbolSize":1},{"data":[{"value":["2007-08-31","0.9991649"]},{"value":["2007-09-28","1.0467641"]},{"value":["2007-10-31","1.0931109"]},{"value":["2007-11-30","1.0519838"]},{"value":["2007-12-31","1.0225560"]},{"value":["2008-01-31","0.9470164"]},{"value":["2008-02-29","0.9374138"]},{"value":["2008-03-31","0.9409591"]},{"value":["2008-04-30","0.9915504"]},{"value":["2008-05-30","1.0035046"]},{"value":["2008-06-30","0.9164105"]},{"value":["2008-07-31","0.8846037"]},{"value":["2008-08-29","0.8491685"]},{"value":["2008-09-30","0.7507609"]},{"value":["2008-10-31","0.5964246"]},{"value":["2008-11-28","0.5569333"]},{"value":["2008-12-31","0.6071605"]},{"value":["2009-01-30","0.5220652"]},{"value":["2009-02-27","0.4694608"]},{"value":["2009-03-31","0.5090122"]},{"value":["2009-04-30","0.5691823"]},{"value":["2009-05-29","0.6435100"]},{"value":["2009-06-30","0.6317857"]},{"value":["2009-07-31","0.6985924"]},{"value":["2009-08-31","0.7300045"]},{"value":["2009-09-30","0.7587623"]},{"value":["2009-10-30","0.7377470"]},{"value":["2009-11-30","0.7680533"]},{"value":["2009-12-31","0.7741743"]},{"value":["2010-01-29","0.7320701"]},{"value":["2010-02-26","0.7375029"]},{"value":["2010-03-31","0.7839329"]},{"value":["2010-04-30","0.7621946"]},{"value":["2010-05-28","0.6743363"]},{"value":["2010-06-30","0.6621085"]},{"value":["2010-07-30","0.7393245"]},{"value":["2010-08-31","0.7128310"]},{"value":["2010-09-30","0.7816686"]},{"value":["2010-10-29","0.8133701"]},{"value":["2010-11-30","0.7735169"]},{"value":["2010-12-31","0.8388516"]},{"value":["2011-01-31","0.8569513"]},{"value":["2011-02-28","0.8882778"]},{"value":["2011-03-31","0.8660516"]},{"value":["2011-04-29","0.9196719"]},{"value":["2011-05-31","0.8948347"]},{"value":["2011-06-30","0.8839249"]},{"value":["2011-07-29","0.8628016"]},{"value":["2011-08-31","0.7887544"]},{"value":["2011-09-30","0.6993870"]},{"value":["2011-10-31","0.7676313"]},{"value":["2011-11-30","0.7516148"]},{"value":["2011-12-30","0.7355505"]},{"value":["2012-01-31","0.7768546"]},{"value":["2012-02-29","0.8147969"]},{"value":["2012-03-30","0.8174631"]},{"value":["2012-04-30","0.7980056"]},{"value":["2012-05-31","0.7088844"]},{"value":["2012-06-29","0.7583695"]},{"value":["2012-07-31","0.7602909"]},{"value":["2012-08-31","0.7852740"]},{"value":["2012-09-28","0.8059286"]},{"value":["2012-10-31","0.8145073"]},{"value":["2012-11-30","0.8365676"]},{"value":["2012-12-31","0.8720730"]},{"value":["2013-01-31","0.9054904"]},{"value":["2013-02-28","0.8950938"]},{"value":["2013-03-28","0.9057640"]},{"value":["2013-04-30","0.9530042"]},{"value":["2013-05-31","0.9246599"]},{"value":["2013-06-28","0.8988146"]},{"value":["2013-07-31","0.9455224"]},{"value":["2013-08-30","0.9303741"]},{"value":["2013-09-30","1.0034128"]},{"value":["2013-10-31","1.0356095"]},{"value":["2013-11-29","1.0424539"]},{"value":["2013-12-31","1.0622417"]},{"value":["2014-01-31","1.0069377"]},{"value":["2014-02-28","1.0668287"]},{"value":["2014-03-31","1.0630584"]},{"value":["2014-04-30","1.0798021"]},{"value":["2014-05-30","1.0988631"]},{"value":["2014-06-30","1.1102443"]},{"value":["2014-07-31","1.0839153"]},{"value":["2014-08-29","1.0867829"]},{"value":["2014-09-30","1.0416509"]},{"value":["2014-10-31","1.0379825"]},{"value":["2014-11-28","1.0379825"]},{"value":["2014-12-31","0.9988533"]},{"value":["2015-01-30","1.0059728"]},{"value":["2015-02-27","1.0679396"]},{"value":["2015-03-31","1.0549282"]},{"value":["2015-04-30","1.0957167"]},{"value":["2015-05-29","1.0951868"]},{"value":["2015-06-30","1.0633084"]},{"value":["2015-07-31","1.0788621"]},{"value":["2015-08-31","1.0008242"]},{"value":["2015-09-30","0.9599868"]},{"value":["2015-10-30","1.0246322"]},{"value":["2015-11-30","1.0168212"]},{"value":["2015-12-31","0.9951260"]},{"value":["2016-01-29","0.9401121"]},{"value":["2016-02-29","0.9111145"]},{"value":["2016-03-31","0.9766326"]},{"value":["2016-04-29","0.9992247"]},{"value":["2016-05-31","0.9962307"]},{"value":["2016-06-30","0.9757113"]},{"value":["2016-07-29","1.0162744"]},{"value":["2016-08-31","1.0204130"]},{"value":["2016-09-30","1.0371259"]},{"value":["2016-10-31","1.0121749"]},{"value":["2016-11-30","0.9969271"]},{"value":["2016-12-30","1.0213374"]},{"value":["2017-01-31","1.0587922"]},{"value":["2017-02-28","1.0699724"]},{"value":["2017-03-31","1.1026969"]},{"value":["2017-04-28","1.1271075"]},{"value":["2017-05-31","1.1655479"]},{"value":["2017-06-30","1.1729754"]},{"value":["2017-07-31","1.2067567"]},{"value":["2017-08-31","1.2070406"]},{"value":["2017-09-29","1.2373892"]},{"value":["2017-10-31","1.2593378"]},{"value":["2017-11-30","1.2701698"]},{"value":["2017-12-29","1.2911801"]},{"value":["2018-01-31","1.3524864"]},{"value":["2018-02-28","1.2834086"]},{"value":["2018-03-29","1.2784045"]},{"value":["2018-04-30","1.2945833"]},{"value":["2018-05-31","1.2760935"]},{"value":["2018-06-29","1.2549961"]},{"value":["2018-07-31","1.2836651"]},{"value":["2018-08-31","1.2614319"]},{"value":["2018-09-28","1.2703984"]},{"value":["2018-10-31","1.1611801"]},{"value":["2018-11-30","1.1670520"]},{"value":["2018-12-31","1.1007914"]},{"value":["2019-01-31","1.1829801"]},{"value":["2019-02-28","1.2105741"]},{"value":["2019-03-29","1.2178581"]},{"value":["2019-04-30","1.2524239"]},{"value":["2019-05-31","1.1871657"]},{"value":["2019-06-28","1.2567256"]},{"value":["2019-07-31","1.2311155"]},{"value":["2019-08-30","1.2079150"]},{"value":["2019-09-30","1.2459925"]},{"value":["2019-10-31","1.2860294"]},{"value":["2019-11-29","1.3033179"]},{"value":["2019-12-31","1.3498033"]},{"value":["2020-01-31","1.3093643"]},{"value":["2020-02-28","1.2091860"]},{"value":["2020-03-31","1.0259599"]},{"value":["2020-04-30","1.0979678"]},{"value":["2020-05-29","1.1592053"]},{"value":["2020-06-30","1.1997525"]},{"value":["2020-07-31","1.2313004"]},{"value":["2020-08-31","1.2950150"]},{"value":["2020-09-30","1.2717083"]},{"value":["2020-10-30","1.2266234"]},{"value":["2020-11-30","1.4019885"]},{"value":["2020-12-31","1.4809211"]},{"value":["2021-01-29","1.4702559"]},{"value":["2021-02-26","1.5060161"]},{"value":["2021-03-31","1.5477097"]},{"value":["2021-04-30","1.5949825"]},{"value":["2021-05-28","1.6520248"]},{"value":["2021-06-30","1.6368039"]},{"value":["2021-07-30","1.6450641"]},{"value":["2021-08-31","1.6666680"]},{"value":["2021-09-30","1.6102418"]},{"value":["2021-10-29","1.6622262"]},{"value":["2021-11-30","1.5850468"]},{"value":["2021-12-31","1.6536568"]},{"value":["2022-01-31","1.5898552"]},{"value":["2022-02-28","1.5477528"]},{"value":["2022-03-31","1.5582070"]},{"value":["2022-04-29","1.4524449"]}],"yAxisIndex":0,"xAxisIndex":0,"name":"VEA","type":"line","coordinateSystem":"cartesian2d","symbol":"emptyCircle","symbolSize":1}],"tooltip":{"trigger":"axis","backgroundColor":"white"},"grid":[{"right":"15%","top":"20%"}],"title":[{"left":"center","top":"5%","text":"Growth of select ETFs"}],"dataZoom":[{"type":"slider","start":0,"end":100}],"toolbox":{"feature":{"dataZoom":{"selector":{"start":"20","end":"80"}},"reset":[],"dataView":[],"saveAsImage":[]}}},"dispose":true},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code># e_legend(
#   # selector = list(
#            #       list(type = &#39;inverse&#39;, title = &#39;Invert&#39;),
#            #       list(type = &#39;all&#39;, title = &#39;Reset&#39;)
# )</code></pre>
<div id="weights" class="section level2">
<h2>Weights</h2>
<p>One decision we have to make is how much of each asset to add to our portfolio.
There are many ways to do this and one popular way is to use mean-variance
optimization to determine which portfolio (out of a set of portfolios with
with varying asset weights) achieved the highest return for each unit of risk.
Here, risk is measured as the standard deviation of such returns.</p>
</div>
<div id="set-benchmark" class="section level2">
<h2>Set Benchmark</h2>
<p>We will assume that investing equally in all assets is a reasonable benchmark
for this analysis.</p>
<pre class="r"><code># stats &lt;- 
#       ticker_returns %&gt;% 
#       tq_performance(Ra = return,
#                      Rb = NULL,
#                      performance_fun = SharpeRatio)

equal_wts &lt;- rep(1/length(tickers_to_use), length(tickers_to_use))

bm_returns &lt;- 
      ticker_returns %&gt;%
      suppressMessages(
            tq_portfolio(assets_col = ticker,
                   returns_col = return,
                   weights = equal_wts,
                   col_rename = &quot;return&quot;)
                   )

wts_list &lt;- list()
length(wts_list) &lt;- length(tickers_to_use)
wts_grid &lt;- map(wts_list, ~seq(0, 1, 0.1))

weights_grid &lt;- tibble(expand.grid(
      wts_grid
      )) %&gt;% 
      filter(rowSums(.) == 1)

n_portfolios &lt;- nrow(weights_grid)

weights &lt;- weights_grid %&gt;% transpose() %&gt;% unlist(use.names = FALSE)

ticker_returns_grid &lt;-
  ticker_returns %&gt;% 
  select(-index) %&gt;% 
  tq_repeat_df(n = n_portfolios)

tickers &lt;- ticker_returns %&gt;% distinct(ticker) %&gt;% pull()

weights_table &lt;-
  tibble(tickers) %&gt;%
  tq_repeat_df(n = n_portfolios) %&gt;%
  bind_cols(tibble(weights)) %&gt;% 
  full_join(tibble(portfolio = 0, tickers = tickers_to_use, weights = equal_wts))


weights_table %&gt;%
  ggplot(aes(x = portfolio, y = weights, fill = tickers)) +
  geom_col(alpha = 0.8) +
  scale_y_continuous(labels = scales::percent) +
  theme_minimal() +
  labs(title = &quot;Weights for portfolio assets&quot;,
       subtitle = &quot;What are the possible ways to combine assets in a portfolio&quot;,
       x = &quot;portfolio #&quot;, y = &quot;&quot;,
       fill = &quot;Ticker&quot;) +
  theme(
    plot.title = element_text(face = &quot;bold&quot;, size = 13),
    plot.title.position = &quot;plot&quot;
  )</code></pre>
<p><img src="index_files/figure-html/weights-1.png" width="672" /></p>
<p>As you can see, there are hundreds of possible portfolio constructions. So,
which one yielded the best performance over the â€¦</p>
</div>
<div id="performance-stats" class="section level2">
<h2>Performance stats</h2>
<pre class="r"><code># port_returns_grid &lt;-
#       ticker_returns_grid %&gt;%
#       tq_portfolio(assets_col = ticker,
#                    returns_col = return,
#                    weights = weights_table,
#                    col_rename = &quot;port_return&quot;)
# 
# write_feather(port_returns_grid, &quot;data/port_returns_grid&quot;)
# write_csv(port_returns_grid, &quot;data/port_returns_grid.csv&quot;, col_names = TRUE)
port_returns_grid &lt;- read_feather(here::here(&quot;static&quot;, &quot;data&quot;, &quot;port_returns_grid&quot;)) %&gt;% ungroup()
# port_returns_grid &lt;- data.table::fread(&quot;data/port_returns_grid.csv&quot;) %&gt;% as_tibble()

# library(here)

bm_returns_grid &lt;-
      bm_returns %&gt;%
      tq_portfolio(assets = ticker,
                   returns_col = return,
                   weights = equal_wts,
                   col_rename = &quot;port_return&quot;) %&gt;% 
      add_column(portfolio = 0)

combined_returns_grid &lt;-
      port_returns_grid %&gt;%
      full_join(bm_returns_grid) %&gt;% 
      arrange(portfolio)</code></pre>
<pre><code>                                                                                                                                                                                                                                                                                                                                vv    v    v    v      v      vv                                                                                                                                                                                                         </code></pre>
<pre class="r"><code># capm_stats_grid &lt;-
#       combined_returns %&gt;%
#       filter(portfolio != 0) %&gt;% 
#       full_join(bm_returns_grid %&gt;% select(date, bm_return = port_return)) %&gt;%
#       tq_performance(
#             Ra = port_return,
#             Rb = bm_return,
#             performance_fun = table.CAPM)
# 
# write_feather(capm_stats, &quot;data/capm_stats&quot;)
capm_stats &lt;- read_feather(here::here(&quot;static&quot;, &quot;data&quot;, &quot;capm_stats&quot;)) %&gt;% ungroup()

# port_performance &lt;-
#       combined_returns_grid %&gt;%
#       left_join(benchmark_returns %&gt;% select(date, bm_return = return), by = &quot;date&quot;) %&gt;%
#       tq_performance(Ra = port_return,
#                      performance_fun = table.Stats)
# 
# write_feather(port_performance, &quot;data/port_performance&quot;)
port_performance &lt;- 
  read_feather(here::here(&quot;static&quot;, &quot;data&quot;, &quot;port_performance&quot;)) %&gt;% 
  ungroup()

combined_performance &lt;- 
  port_performance %&gt;% 
  ungroup() %&gt;% 
  janitor::clean_names() %&gt;% 
  mutate(annual_return = geometric_mean * 12) %&gt;% 
  mutate(annual_stdev = stdev*sqrt(12)) %&gt;% 
  mutate(sharpe_ratio = ((annual_return - 0.03) / annual_stdev))</code></pre>
</div>
</div>
<div id="portfolios-with-highest-returns" class="section level1">
<h1>Portfolios with Highest Returns</h1>
<p>What portfolios experienced the highest returns over the period?</p>
<pre class="r"><code>best_return &lt;-
  combined_performance %&gt;%
  arrange(desc(annual_return),
          desc(sharpe_ratio),
          stdev,
          desc(skewness)) %&gt;%
  select(portfolio, sharpe_ratio, geometric_mean, variance, skewness) %&gt;%
  slice(1:10) %&gt;%
  pull(portfolio)

weights_table %&gt;%
  filter(portfolio %in% best_return) %&gt;%
  ggplot(aes(x = tickers, y = weights, fill = tickers)) +
  geom_col() +
  geom_text(aes(label = scales::percent_format()(weights)),
            nudge_y = 0.07,
            color = &quot;darkgray&quot;) +
  scale_y_continuous(labels = scales::percent) +
  facet_wrap(. ~ paste(&quot;Portfolio: &quot;, portfolio)) +
  labs(
    x = &quot;&quot;,
    y = &quot;&quot;,
    title = &quot;Portfolio Weights&quot;,
    subtitle = &quot;Weights for portfolios with best returns&quot;,
    fill = &quot;Title&quot;
  ) +
  theme_bw() +
  theme(
    axis.text.y = element_blank(),
    plot.title = element_text(face = &quot;bold&quot;, size = 13),
    legend.background = element_rect(
      fill = &quot;white&quot;,
      size = 4,
      colour = &quot;white&quot;
    ),
    axis.ticks = element_blank(),
    panel.grid.major = element_blank(),
    panel.grid.minor = element_blank(),
    plot.title.position = &quot;plot&quot;
  )</code></pre>
<p><img src="index_files/figure-html/best_return-1.png" width="672" /></p>
<pre class="r"><code>best_sharpe &lt;-
  combined_performance %&gt;%
  arrange(desc(sharpe_ratio),
          desc(geometric_mean),
          stdev,
          desc(skewness)) %&gt;%
  select(portfolio, sharpe_ratio, geometric_mean, variance, skewness) %&gt;%
  slice(1:10) %&gt;%
  pull(portfolio)


weights_table %&gt;%
  filter(portfolio %in% best_sharpe) %&gt;%
  ggplot(aes(x = tickers, y = weights, fill = tickers)) +
  geom_col() +
  geom_text(aes(label = scales::percent_format()(weights)),
            nudge_y = 0.07,
            color = &quot;darkgray&quot;) +
  scale_y_continuous(labels = scales::percent) +
  facet_wrap(. ~ paste(&quot;Portfolio: &quot;, portfolio)) +
  labs(
    x = &quot;&quot;,
    y = &quot;&quot;,
    title = &quot;Best risk-adjusted returns&quot;,
    subtitle = &quot;Weights for portfolios with best sharpe_ratios (best return for each unit of risk)&quot;,
    fill = &quot;Ticker&quot;
  ) +
  theme_bw() +
  theme(
    axis.text.y = element_blank(),
    plot.title = element_text(face = &quot;bold&quot;, size = 13),
    legend.background = element_rect(
      fill = &quot;white&quot;,
      size = 4,
      colour = &quot;white&quot;
    ),
    axis.ticks = element_blank(),
    panel.grid.major = element_blank(),
    panel.grid.minor = element_blank(),
    plot.title.position = &quot;plot&quot;
  )</code></pre>
<p><img src="index_files/figure-html/best_sharpe_ratio-1.png" width="672" /></p>
<pre class="r"><code># tq_performance_fun_options()</code></pre>
</div>
